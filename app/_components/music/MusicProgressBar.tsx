interface Props {
  progress: number;
}

function MusicProgressBar({ progress }: Props) {
  const totalRects = 35;

  const filledRects = Math.floor((progress / 100) * totalRects);
  const partialFill = (progress / 100) * totalRects - filledRects;

  const getFillColor = (index: number) => {
    if (index < filledRects) {
      return "white";
    }
    if (index === filledRects && partialFill > 0) {
      const gradientId = "gradient-partial";
      return `url(#${gradientId})`;
    }
    return "#52525B";
  };

  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="240"
      height="48"
      viewBox="0 0 240 48"
      fill=""
    >
      <defs>
        <linearGradient id="gradient-partial" x1="0" y1="0" x2="1" y2="0">
          <stop offset={`${partialFill * 100}%`} stopColor="white" />
          <stop offset={`${partialFill * 100}%`} stopColor="#52525B" />
        </linearGradient>
      </defs>
      <rect
        x="0"
        y="21.0462"
        width="4.93827"
        height="5.53846"
        rx="2.46914"
        fill={getFillColor(0)}
      />
      <rect
        x="6.91357"
        y="21.0462"
        width="4.93827"
        height="5.53846"
        rx="2.46914"
        fill={getFillColor(1)}
      />
      <rect
        x="13.8271"
        y="18.4615"
        width="4.93827"
        height="11.0769"
        rx="2.46914"
        fill={getFillColor(2)}
      />
      <rect
        x="20.7412"
        y="18.4615"
        width="4.93827"
        height="11.0769"
        rx="2.46914"
        fill={getFillColor(3)}
      />
      <rect
        x="27.6543"
        y="18.4615"
        width="4.93827"
        height="11.0769"
        rx="2.46914"
        fill={getFillColor(4)}
      />
      <rect
        x="34.5679"
        y="16.6154"
        width="4.93827"
        height="14.7692"
        rx="2.46914"
        fill={getFillColor(5)}
      />
      <rect
        x="41.4814"
        y="16.6154"
        width="4.93827"
        height="14.7692"
        rx="2.46914"
        fill={getFillColor(6)}
      />
      <rect
        x="48.395"
        y="12.9231"
        width="4.93827"
        height="22.1538"
        rx="2.46914"
        fill={getFillColor(7)}
      />
      <rect
        x="55.3086"
        y="9.96927"
        width="4.93827"
        height="27.6923"
        rx="2.46914"
        fill={getFillColor(8)}
      />
      <rect
        x="62.2222"
        y="11.8154"
        width="4.93827"
        height="24"
        rx="2.46914"
        fill={getFillColor(9)}
      />
      <rect
        x="69.1357"
        y="14.7692"
        width="4.93827"
        height="18.4615"
        rx="2.46914"
        fill={getFillColor(10)}
      />
      <rect
        x="76.0493"
        y="17.3538"
        width="4.93827"
        height="12.9231"
        rx="2.46914"
        fill={getFillColor(11)}
      />
      <rect
        x="82.9629"
        y="14.7692"
        width="4.93827"
        height="18.4615"
        rx="2.46914"
        fill={getFillColor(12)}
      />
      <rect
        x="89.8765"
        y="11.8154"
        width="4.93827"
        height="24"
        rx="2.46914"
        fill={getFillColor(13)}
      />
      <rect
        x="96.79"
        y="5.53845"
        width="4.93827"
        height="36.9231"
        rx="2.46914"
        fill={getFillColor(14)}
      />
      <rect
        x="103.704"
        width="4.93827"
        height="48"
        rx="2.46914"
        fill={getFillColor(15)}
      />
      <rect
        x="110.618"
        y="12.9231"
        width="4.93827"
        height="22.1538"
        rx="2.46914"
        fill={getFillColor(16)}
      />
      <rect
        x="117.531"
        y="14.7692"
        width="4.93827"
        height="18.4615"
        rx="2.46914"
        fill={getFillColor(17)}
      />
      <rect
        x="124.444"
        y="16.6154"
        width="4.93827"
        height="14.7692"
        rx="2.46914"
        fill={getFillColor(18)}
      />
      <rect
        x="131.358"
        y="18.4615"
        width="4.93827"
        height="11.0769"
        rx="2.46914"
        fill={getFillColor(19)}
      />
      <rect
        x="138.271"
        y="14.7692"
        width="4.93827"
        height="18.4615"
        rx="2.46914"
        fill={getFillColor(20)}
      />
      <rect
        x="145.185"
        y="5.53845"
        width="4.93827"
        height="36.9231"
        rx="2.46914"
        fill={getFillColor(21)}
      />
      <rect
        x="152.099"
        y="11.0769"
        width="4.93827"
        height="25.8462"
        rx="2.46914"
        fill={getFillColor(22)}
      />
      <rect
        x="159.012"
        y="14.7692"
        width="4.93827"
        height="18.4615"
        rx="2.46914"
        fill={getFillColor(23)}
      />
      <rect
        x="165.926"
        y="18.4615"
        width="4.93827"
        height="11.0769"
        rx="2.46914"
        fill={getFillColor(24)}
      />
      <rect
        x="172.839"
        y="14.7692"
        width="4.93827"
        height="18.4615"
        rx="2.46914"
        fill={getFillColor(25)}
      />
      <rect
        x="179.753"
        y="18.4615"
        width="4.93827"
        height="11.0769"
        rx="2.46914"
        fill={getFillColor(26)}
      />
      <rect
        x="186.667"
        y="12.9231"
        width="4.93827"
        height="22.1538"
        rx="2.46914"
        fill={getFillColor(27)}
      />
      <rect
        x="193.581"
        y="15.5077"
        width="4.93827"
        height="16.6154"
        rx="2.46914"
        fill={getFillColor(28)}
      />
      <rect
        x="200.494"
        y="18.4615"
        width="4.93827"
        height="11.0769"
        rx="2.46914"
        fill={getFillColor(29)}
      />
      <rect
        x="207.407"
        y="18.4615"
        width="4.93827"
        height="11.0769"
        rx="2.46914"
        fill={getFillColor(30)}
      />
      <rect
        x="214.321"
        y="14.7692"
        width="4.93827"
        height="18.4615"
        rx="2.46914"
        fill={getFillColor(31)}
      />
      <rect
        x="221.234"
        y="18.4615"
        width="4.93827"
        height="11.0769"
        rx="2.46914"
        fill={getFillColor(32)}
      />
      <rect
        x="228.148"
        y="21.0462"
        width="4.93827"
        height="5.53846"
        rx="2.46914"
        fill={getFillColor(33)}
      />
      <rect
        x="235.062"
        y="21.0462"
        width="4.93827"
        height="5.53846"
        rx="2.46914"
        fill={getFillColor(34)}
      />
    </svg>
  );
}

export default MusicProgressBar;
